-- Roblox Main Menu Base – Nur GUI (für loadstring)

local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")

local BoldItalic = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Bold, Enum.FontStyle.Italic)

-- Default-Werte (falls keine Config gesetzt wird)
local Name = "My Menu"
local Tabs = {"Combat"}

-- ==================== GUI ERSTELLEN ====================
local gui = Instance.new("ScreenGui")
gui.ResetOnSpawn = false
gui.Parent = game:GetService("CoreGui")

local main = Instance.new("Frame")
main.Size = UDim2.new(0, 430, 0, 400)
main.Position = UDim2.new(0.5, 0, 0.5, 0)
main.AnchorPoint = Vector2.new(0.5, 0.5)
main.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
main.Visible = false
main.ZIndex = 10
main.Parent = gui
Instance.new("UICorner", main).CornerRadius = UDim.new(0, 14)

local uiScale = Instance.new("UIScale", main)
uiScale.Scale = 0

-- Title
local title = Instance.new("TextLabel", main)
title.Size = UDim2.new(1, -60, 0, 45)
title.Position = UDim2.new(0.03, 0, 0, 0)
title.BackgroundTransparency = 1
title.FontFace = BoldItalic
title.TextSize = 25
title.TextXAlignment = Enum.TextXAlignment.Left
title.TextColor3 = Color3.new(1, 1, 1)
title.ZIndex = 15

local titleLine = Instance.new("Frame", main)
titleLine.Size = UDim2.new(0.94, 0, 0, 1)
titleLine.Position = UDim2.new(0.03, 0, 0, 45)
titleLine.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
titleLine.ZIndex = 15

-- Close Button
local closeBtn = Instance.new("TextButton", main)
closeBtn.Size = UDim2.new(0, 36, 0, 36)
closeBtn.Position = UDim2.new(1, -46, 0, 6)
closeBtn.BackgroundColor3 = Color3.fromRGB(170, 35, 40)
closeBtn.Text = ""
closeBtn.AutoButtonColor = false
closeBtn.ZIndex = 20
Instance.new("UICorner", closeBtn).CornerRadius = UDim.new(1, 0)
closeBtn.MouseButton1Click:Connect(function()
    gui:Destroy()
end)

-- Drag
local dragBar = Instance.new("Frame", main)
dragBar.Size = UDim2.new(1, 0, 0, 45)
dragBar.BackgroundTransparency = 1
dragBar.ZIndex = 100

local dragging = false
local dragStart, startPos

dragBar.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = UserInputService:GetMouseLocation()
        startPos = main.Position
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
        local delta = UserInputService:GetMouseLocation() - dragStart
        main.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)

UserInputService.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = false
    end
end)

-- Content Area (leer)
local contentArea = Instance.new("Frame", main)
contentArea.Size = UDim2.new(0, 300, 0, 330)
contentArea.Position = UDim2.new(0.30, 0, 0.15, 0)
contentArea.BackgroundTransparency = 1
contentArea.ZIndex = 12

-- Tabs Frame
local tabsFrame = Instance.new("Frame", main)
tabsFrame.Size = UDim2.new(0, 115, 0, 330)
tabsFrame.Position = UDim2.new(0.03, 0, 0.15, 0)
tabsFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
tabsFrame.ZIndex = 12
Instance.new("UICorner", tabsFrame).CornerRadius = UDim.new(0, 10)

local tabsStroke = Instance.new("UIStroke", tabsFrame)
tabsStroke.Color = Color3.fromRGB(255, 255, 255)
tabsStroke.Thickness = 1
tabsStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border

-- Selector
local selector = Instance.new("Frame", tabsFrame)
selector.Size = UDim2.new(1, -16, 0, 40)
selector.BackgroundTransparency = 1
selector.ZIndex = 15
Instance.new("UICorner", selector).CornerRadius = UDim.new(0, 10)

local selectorStroke = Instance.new("UIStroke", selector)
selectorStroke.Color = Color3.fromRGB(255, 255, 255)
selectorStroke.Thickness = 1
selectorStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border

-- Tab System
local tabButtons = {}
local currentTab = nil

local function selectTab(tabName)
    if currentTab == tabName then return end
    currentTab = tabName
    TweenService:Create(selector, TweenInfo.new(0.3, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {
        Position = tabButtons[tabName].Position,
        Size = tabButtons[tabName].Size
    }):Play()
end

local function createTab(name, index)
    local btn = Instance.new("TextButton", tabsFrame)
    btn.Size = UDim2.new(1, -16, 0, 40)
    btn.Position = UDim2.new(0, 8, 0, 4 + (index - 1) * 47)
    btn.BackgroundTransparency = 1
    btn.Text = name
    btn.FontFace = BoldItalic
    btn.TextSize = 25
    btn.TextColor3 = Color3.new(1, 1, 1)
    btn.AutoButtonColor = false
    btn.ZIndex = 14
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 10)
    btn.MouseButton1Click:Connect(function()
        selectTab(name)
    end)
    tabButtons[name] = btn
end

-- ==================== CONFIG WIRD HIER ANGEWENDET (GANZ AM ENDE) ====================

-- Warte kurz, damit Config von außen überschrieben werden kann
task.wait()

gui.Name = Name or "MainMenu"
title.Text = Name or "My Menu"

for i, tabName in ipairs(Tabs or {"Combat"}) do
    createTab(tabName, i)
end

if #Tabs > 0 then
    selectTab(Tabs[1])
end

-- Insert Open/Close
UserInputService.InputBegan:Connect(function(input, gpe)
    if gpe then return end
    if input.KeyCode == Enum.KeyCode.Insert then
        if main.Visible then
            TweenService:Create(uiScale, TweenInfo.new(0.2, Enum.EasingStyle.Back, Enum.EasingDirection.In), {Scale = 0}):Play()
            task.delay(0.2, function() main.Visible = false end)
        else
            main.Visible = true
            uiScale.Scale = 0
            TweenService:Create(uiScale, TweenInfo.new(0.3, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {Scale = 1}):Play()
        end
    end
end)

print((Name or "My Menu") .. " Main Menu loaded! Tabs: " .. table.concat(Tabs or {}, ", "))
